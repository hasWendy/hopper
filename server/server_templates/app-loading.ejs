<style>
    <% include ../../web/css/app_loader.css %>
</style>
<div class="app-loading">
    <div class="app-loading-logo">
        <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 viewBox="156 346 300 100" enable-background="new 156 346 300 100" xml:space="preserve">
            <g id="Content">
                <g>
                    <path fill="#007AFF" d="M382.4,427.4c-0.4,0-1,0.1-1.4,0.5v-2.2c0-0.1-0.1-0.3-0.3-0.3h-1.3c-0.1,0-0.3,0.1-0.3,0.3v7
                        c0,0.1,0.1,0.3,0.3,0.3h1.1c0.1,0,0.2-0.1,0.3-0.2v-0.2c0.4,0.3,0.8,0.5,1.4,0.5c1.7,0,2.8-1.1,2.8-2.8S384,427.4,382.4,427.4z
                         M382.2,429c0.7,0,1.2,0.5,1.2,1.2c0,0.7-0.5,1.2-1.2,1.2c-0.6,0-1.2-0.4-1.2-1.2C381,429.5,381.6,429,382.2,429z"/>
                    <path fill="#007AFF" d="M391.6,427.6c0-0.1-0.1-0.1-0.2-0.1H390c-0.1,0-0.2,0-0.2,0.1l-0.9,2.2l-0.3,0.8l-1-2.9
                        c0-0.1-0.1-0.2-0.2-0.2H386c-0.1,0-0.2,0-0.2,0.1c0,0.1,0,0.2,0,0.2l1.9,4.8l-0.9,2c0,0.1,0,0.2,0,0.2c0,0,0.1,0.1,0.2,0.1h1.3
                        c0.1,0,0.2,0,0.2-0.1l3-7C391.6,427.7,391.6,427.7,391.6,427.6z"/>
                    <path fill="#007AFF" d="M422.8,427.7c0-2.1-1.8-3.9-3.9-3.9s-3.9,1.8-3.9,3.9v5.1c0,0.1,0.1,0.3,0.3,0.3h1.3
                        c0.1,0,0.3-0.1,0.3-0.3v-5.1c0-1.1,0.9-2,2-2s2,0.9,2,2v5.1c0,0.1,0.1,0.3,0.3,0.3h1.3c0.1,0,0.3-0.1,0.3-0.3V427.7L422.8,427.7z"
                        />
                    <path fill="#007AFF" d="M395.7,424.1v1.3c0,0.1,0.1,0.3,0.3,0.3h2.5c0.1,0,0.3,0.1,0.3,0.3v6.8c0,0.1,0.1,0.3,0.3,0.3h1.3
                        c0.1,0,0.3-0.1,0.3-0.3v-6.8c0-0.1,0.1-0.3,0.3-0.3h2.5c0.1,0,0.3-0.1,0.3-0.3v-1.3c0-0.1-0.1-0.3-0.3-0.3h-7.3
                        C395.8,423.9,395.7,423.9,395.7,424.1z"/>
                    <path fill="#007AFF" d="M405.3,429.2c0,2.1,1.8,3.9,3.9,3.9s3.9-1.8,3.9-3.9v-5.1c0-0.1-0.1-0.3-0.3-0.3h-1.3
                        c-0.1,0-0.3,0.1-0.3,0.3v5.1c0,1.1-0.9,2-2,2s-2-0.9-2-2v-5.1c0-0.1-0.1-0.3-0.3-0.3h-1.3c-0.1,0-0.3,0.1-0.3,0.3V429.2
                        L405.3,429.2z"/>
                    <path fill="#007AFF" d="M428.5,425.7h3.6c0.1,0,0.3-0.1,0.3-0.3v-1.3c0-0.1-0.1-0.3-0.3-0.3h-3.7l0,0l0,0c-2.1,0-3.8,1.8-3.8,3.9
                        v1.4c0,2.1,1.7,3.8,3.8,3.9l0,0l0,0h3.7c0.1,0,0.3-0.1,0.3-0.3v-1.3c0-0.1-0.1-0.3-0.3-0.3h-3.6c-1,0-1.8-0.7-2-1.5
                        c0-0.2,0.1-0.3,0.3-0.3h5.3c0.1,0,0.3-0.1,0.3-0.3v-1.3c0-0.1-0.1-0.3-0.3-0.3h-5.4c-0.2,0-0.3-0.2-0.3-0.3
                        C426.7,426.3,427.5,425.7,428.5,425.7z"/>
                    <linearGradient id="SVGID_1_" gradientUnits="userSpaceOnUse" x1="333.5433" y1="351.7609" x2="333.5433" y2="384.9759">
                        <stop  offset="0" style="stop-color:#005AFF"/>
                        <stop  offset="3.613961e-02" style="stop-color:#005DFF"/>
                        <stop  offset="0.3914" style="stop-color:#0075FF"/>
                        <stop  offset="0.7215" style="stop-color:#0083FF"/>
                        <stop  offset="1" style="stop-color:#0088FF"/>
                    </linearGradient>
                    <path id="signal3" fill="url(#SVGID_1_)" d="M350.3,385h-3.6c0-16.3-13.2-29.9-29.9-29.9v-3.6C335.2,351.6,350.3,366.6,350.3,385z"/>
                    <linearGradient id="SVGID_2_" gradientUnits="userSpaceOnUse" x1="329.9722" y1="358.8606" x2="329.9722" y2="384.9759">
                        <stop  offset="0" style="stop-color:#005AFF"/>
                        <stop  offset="3.613961e-02" style="stop-color:#005DFF"/>
                        <stop  offset="0.3914" style="stop-color:#0075FF"/>
                        <stop  offset="0.7215" style="stop-color:#0083FF"/>
                        <stop  offset="1" style="stop-color:#0088FF"/>
                    </linearGradient>
                    <path id="signal2" fill="url(#SVGID_2_)" d="M316.8,358.7c14.6,0,26.3,11.7,26.3,26.3h-3.6c0-12.5-10.2-22.7-22.8-22.7L316.8,358.7L316.8,358.7
                        z"/>
                    <linearGradient id="SVGID_3_" gradientUnits="userSpaceOnUse" x1="326.4011" y1="365.9603" x2="326.4011" y2="384.9759">
                        <stop  offset="0" style="stop-color:#005AFF"/>
                        <stop  offset="3.613961e-02" style="stop-color:#005DFF"/>
                        <stop  offset="0.3914" style="stop-color:#0075FF"/>
                        <stop  offset="0.7215" style="stop-color:#0083FF"/>
                        <stop  offset="1" style="stop-color:#0088FF"/>
                    </linearGradient>
                    <path id="signal1" fill="url(#SVGID_3_)" d="M316.8,365.8c10.4,0,19.2,8.7,19.2,19.1h-3.6c0-8.8-6.8-15.5-15.6-15.5L316.8,365.8L316.8,365.8z"
                        />

                        <linearGradient id="SVGID_4_" gradientUnits="userSpaceOnUse" x1="337.0488" y1="640.1809" x2="337.0488" y2="714.3123" gradientTransform="matrix(0.8793 0 0 -0.8793 0 1000.9655)">
                        <stop  offset="0" style="stop-color:#005AFF"/>
                        <stop  offset="3.613961e-02" style="stop-color:#005DFF"/>
                        <stop  offset="0.3914" style="stop-color:#0075FF"/>
                        <stop  offset="0.7215" style="stop-color:#0083FF"/>
                        <stop  offset="1" style="stop-color:#0088FF"/>
                    </linearGradient>
                    <path fill="url(#SVGID_4_)" d="M328.9,384.8c0-6.6-5.3-11.9-11.9-11.9h-41.3c-6.6,0-11.9,5.3-11.9,11.9v41.8
                        c0,6.6,5.3,11.9,11.9,11.9H317c6.6,0,11.9-5.3,11.9-11.9V384.8z"/>
                    <g>
                        <path fill="#404040" d="M160.6,399.6h3.3v2.2c1.3-1.3,2.3-2.5,4.6-2.5c2.1,0,3.7,1,4.5,2.6c1.2-1.6,2.7-2.6,5-2.6
                            c3.3,0,5.1,2,5.1,5.7v9.7h-3.3V406c0-2.4-1.1-3.6-3-3.6c-1.9,0-3.2,1.3-3.2,3.7v8.6h-3.3v-8.7c0-2.3-1.2-3.6-3-3.6
                            c-1.9,0-3.2,1.4-3.2,3.7v8.6h-3.3V399.6z"/>
                        <path fill="#404040" d="M186.5,407.1L186.5,407.1c0-4.3,3.4-7.8,7.9-7.8c4.6,0,7.9,3.5,7.9,7.7v0c0,4.2-3.4,7.8-8,7.8
                            C189.9,414.8,186.5,411.3,186.5,407.1z M199.1,407.1L199.1,407.1c0-2.7-2-4.8-4.6-4.8c-2.7,0-4.6,2.1-4.6,4.7v0
                            c0,2.6,2,4.8,4.6,4.8C197.2,411.8,199.1,409.7,199.1,407.1z"/>
                        <path fill="#404040" d="M209.1,412.1v2.5h-3.8v-20.9h3.8v8.3c0.8-1.5,2.5-2.8,4.9-2.8c3.5,0,6.8,2.8,6.8,7.7v0
                            c0,4.9-3.3,7.7-6.8,7.7C211.5,414.8,209.9,413.5,209.1,412.1z M217.4,407L217.4,407c0-2.9-2-4.8-4.3-4.8c-2.3,0-4.4,1.9-4.4,4.8
                            v0c0,2.9,2.1,4.8,4.4,4.8C215.4,411.8,217.4,410,217.4,407z"/>
                        <path fill="#404040" d="M224.1,394.2h3.8v2.9h-3.8V394.2z M224.1,399.6h3.8v15h-3.8V399.6z"/>
                        <path fill="#404040" d="M232,393.7h3.3v20.9H232V393.7z"/>
                        <path fill="#404040" d="M238.7,407.1L238.7,407.1c0-4.3,3-7.8,7.3-7.8c4.7,0,7.1,3.8,7.1,8.1c0,0.3,0,0.6,0,1h-10.9
                            c0.4,2.1,2.1,3.7,4.3,3.7c1.7,0,2.8-0.7,4.1-1.8l2,1.8c-1.4,1.7-3.4,2.8-6.1,2.8C242.1,414.8,238.7,411.7,238.7,407.1z
                             M249.8,405.9c-0.2-2.1-1.5-3.9-3.8-3.9c-2.1,0-3.6,1.8-3.8,3.9H249.8z"/>
                    </g>
                    <g>
                        <path fill="#FFFFFF" d="M280.5,414.6v-2c-1.3,1.2-2.5,2.1-4.8,2.1c-2.8,0-5.3-1.6-5.3-4.6v0c0-3.3,2.5-4.9,6-4.9
                            c1.8,0,2.8,0.3,4.1,0.6v-0.3c0-2-1.3-3.2-3.7-3.2c-1.7,0-2.9,0.4-4.3,0.9l-0.9-2.7c1.6-0.8,3.3-1.3,5.7-1.3
                            c4.4,0,6.6,2.3,6.6,6.3v9H280.5z M280.5,408.2c-0.8-0.3-2-0.6-3.3-0.6c-2.1,0-3.3,0.9-3.3,2.3v0c0,1.4,1.2,2.2,2.8,2.2
                            c2.3,0,3.9-1.3,3.9-3.1V408.2z"/>
                        <path fill="#FFFFFF" d="M288,399.6h3.3v2.5c0.8-1.5,2.7-2.8,5.1-2.8c3.5,0,7,2.8,7,7.7v0c0,4.9-3.5,7.7-7,7.7
                            c-2.5,0-4.3-1.3-5.1-2.6v6.7H288V399.6z M299.7,407L299.7,407c0-2.9-1.8-4.8-4.1-4.8c-2.3,0-4.2,1.9-4.2,4.8v0
                            c0,2.9,1.9,4.8,4.2,4.8C297.9,411.8,299.7,410,299.7,407z"/>
                        <path fill="#FFFFFF" d="M306.8,399.6h3.3v2.5c1.3-1.5,2.7-2.8,5.1-2.8c3.5,0,7,2.8,7,7.7v0c0,4.9-3.5,7.7-7,7.7
                            c-2.5,0-3.8-1.3-5.1-2.6v6.7h-3.3V399.6z M318.5,407L318.5,407c0-2.9-1.8-4.8-4.1-4.8c-2.3,0-4.2,1.9-4.2,4.8v0
                            c0,2.9,1.9,4.8,4.2,4.8C316.7,411.8,318.5,410,318.5,407z"/>
                    </g>
                    <g>
                        <path fill="#404040" d="M339.4,410.3v-7.8h-1.7v-2.9h1.7v-4.2h3.3v4.2h4.2v2.9h-4.2v7.3c0,1.3,0.8,1.9,2,1.9
                            c0.8,0,1.4-0.2,2.2-0.5v2.8c-0.8,0.5-1.9,0.8-3.1,0.8C341.2,414.7,339.4,413.6,339.4,410.3z"/>
                        <path fill="#404040" d="M350.3,399.6h3.3v3.3c0.8-2.2,2.9-3.8,5.4-3.6v3.7h-0.3c-3,0-5.2,1.9-5.2,5.8v5.8h-3.3V399.6z"/>
                        <path fill="#404040" d="M371.1,414.6v-2c-1.3,1.2-2.5,2.1-4.8,2.1c-2.8,0-5.3-1.6-5.3-4.6v0c0-3.3,2.5-4.9,6-4.9
                            c1.8,0,2.8,0.3,4.1,0.6v-0.3c0-2-1.3-3.2-3.7-3.2c-1.7,0-2.9,0.4-4.3,0.9l-0.9-2.7c1.6-0.8,3.3-1.3,5.7-1.3
                            c4.4,0,6.6,2.3,6.6,6.3v9H371.1z M371.1,408.2c-0.8-0.3-2-0.6-3.3-0.6c-2.1,0-3.3,0.9-3.3,2.3v0c0,1.4,1.2,2.2,2.8,2.2
                            c2.3,0,3.9-1.3,3.9-3.1V408.2z"/>
                        <path fill="#404040" d="M377.8,407.1L377.8,407.1c0-4.3,3.2-7.8,7.6-7.8c2.8,0,4.5,1,5.9,2.5l-2.1,2.3c-1-1.1-2.1-1.9-3.8-1.9
                            c-2.5,0-4.3,2.1-4.3,4.7v0c0,2.6,1.8,4.8,4.4,4.8c1.6,0,2.8-0.8,3.8-1.9l2,2c-1.5,1.6-3.1,2.8-6,2.8
                            C381,414.8,377.8,411.3,377.8,407.1z"/>
                        <path fill="#404040" d="M394.5,393.7h3.3v12.4l6.3-6.6h4.1l-5.9,6.1l6.1,8.9h-3.9l-4.6-6.5l-2.1,2.1v4.4h-3.3V393.7z"/>
                        <path fill="#404040" d="M411.2,394.2h3.3v2.9h-3.3V394.2z M411.2,399.6h3.3v15h-3.3V399.6z"/>
                        <path fill="#404040" d="M419.2,399.6h3.3v2.3c0.8-1.4,2.4-2.6,4.7-2.6c3.3,0,5.3,2.3,5.3,5.7v9.7h-3.3V406c0-2.3-1.2-3.6-3.3-3.6
                            c-2,0-3.4,1.4-3.4,3.7v8.6h-3.3V399.6z"/>
                        <path fill="#404040" d="M436.5,417.2l1.3-2.5c1.6,1,3.2,1.6,5.2,1.6c3,0,4.6-1.6,4.6-4.6v-1.2c-0.8,1.6-2.6,2.7-5.1,2.7
                            c-3.5,0-6.6-2.6-6.6-7v0c0-4.4,3.2-7,6.6-7c2.5,0,4.2,1.2,5.1,2.5v-2.2h3.8v11.8c0,2.5-0.8,4.4-2,5.6c-1.3,1.3-3.5,2-6.1,2
                            C440.8,419,438.4,418.4,436.5,417.2z M448,406.3L448,406.3c0-2.5-2.1-4.2-4.5-4.2s-4.3,1.6-4.3,4.1v0c0,2.5,2,4.1,4.3,4.1
                            C445.9,410.4,448,408.7,448,406.3z"/>
                    </g>
                </g>
            </g>
            <g id="Guides">
            </g>
            <g id="FPO">
            </g>
        </svg>
        <div class="app-loading-text"></div>
    </div>
    <script type="text/javascript">
      (function() {
        var l;
        window.loadingStateMessage = l = {};

        l._queue = [];
        l._adding = false;

        // animation duration plus a bit of padding to prevent messages from changing too quickly
        l._animationDuration = 1200;

        l._getMessageNode = function(msg) {
          var node = document.createElement('div');
          node.className = 'message-element';
          node.innerHTML = [
          '<div class="pane-1">',
            '<div class="pane-1-content">',
              msg,
            '</div>',
          '</div>',
          '<div class="pane-2">',
            '<div class="pane-2-content">',
              msg,
            '</div>',
          '</div>'
          ].join('');
          return node;
        }

        l._findElement = function() {
          var elementList = document.getElementsByClassName('app-loading-text');

          if (elementList.length) {
            return elementList[0];
          }
          throw new Error('Could not find element with className app-loading-text');
        }

        l.set = function(msg) {
          this._currentMessage = msg;

          if (this._adding) {
            this._queue.push(msg);
            return;
          }

          var parent = this._findElement();

          // remove old Messages
          var oldMessages = parent.getElementsByClassName('message-element');

          Array.prototype.forEach.call(oldMessages, function(elem) {
            elem.className += ' removing';
            setTimeout(function() {
              parent.removeChild(elem);
            }, this._animationDuration);
          }.bind(this));

          // add new message
          var newMessage = l._getMessageNode(msg);
          newMessage.className += ' adding';
          l._adding = true;
          setTimeout(function() {
            this._adding = false;
            newMessage.className = newMessage.className.replace(' adding', '');

            if (this._queue.length) {
              this.set(this._queue.shift());
            }
          }.bind(this), this._animationDuration);

          parent.appendChild(newMessage);
        }

        l.get = function() {
          return this._currentMessage;
        };

        l.dismiss = function() {
          var el = document.getElementById("app-loading");
          el.style.display = 'none';
        };

        l.set('Loading application files');
      })()

    </script>
</div>
